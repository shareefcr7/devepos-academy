;/*FB_PKG_DELIM*/

__d("ArtillerySegment",["invariant","cr:9985"],(function(t,n,r,o,a,i,l,s){var e=0,u=(function(){function t(t){t||s(0,1496),"category"in t&&"description"in t||s(0,3138,JSON.stringify(t)),this.$1=!1,this.$2=babelHelpers.extends({},t,{id:(e++).toString(36)}),this.$3=[]}var r=t.prototype;return r.getID=function(){return this.$2.id},r.begin=function(){return this.$2.begin=n("cr:9985")(),this},r.end=function(){return this.$2.end=n("cr:9985")(),this},r.appendChild=function(){var e=this;!this.$1||s(0,37302,this.$2.description);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){e.$3.push(t.getID())}),this},r.setPosted=function(){return this.$1=!0,this},r.getPostData=function(){return babelHelpers.extends({},this.$2,{id:this.$2.id,children:this.$3.slice()})},t})();l.default=u}),98);
__d("ArtillerySequence",["invariant"],(function(t,n,r,o,a,i,l,s){var e=0,u=(function(){function t(t){t||s(0,1496),"description"in t||s(0,1497,JSON.stringify(t)),this.$1=!1,this.$2=babelHelpers.extends({},t,{id:(e++).toString(36)}),this.$3=[]}var n=t.prototype;return n.getID=function(){return this.$2.id},n.addSegment=function(){var e=this;!this.$1||s(0,37342,this.$2.description);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){e.$3.push(t.getID())}),this},n.setPosted=function(){return this.$1=!0,this},n.getPostData=function(){return babelHelpers.extends({},this.$2,{id:this.$2.id,segments:this.$3.slice()})},t})();l.default=u}),98);
__d("ArtilleryTrace",["invariant","ArtillerySegment","ArtillerySequence"],(function(t,n,r,o,a,i,l,s){var e=(function(){function e(){this.$1=!1,this.$3=void 0,this.$4={},this.$5={},this.$6=[],this.$7=[],this.$8={},this.$9=[],this.$10=null}var t=e.prototype;return t.createSequence=function(t){!this.$1||s(0,4917);var e=new(r("ArtillerySequence"))(t);return this.$6.push(e),e},t.createSegment=function(t){!this.$1||s(0,4918);var e=new(r("ArtillerySegment"))(t);return this.$7.push(e),e},t.markSegment=function(t,n){return!this.$1||s(0,4919),this.$8[n]=t.getID(),this},t.connectTrace=function(t,n){return!this.$1||s(0,4919),n=n||this.$2,n||s(0,4920),this.$9.push({segment:t.getID(),trace:n}),this},t.setID=function(t,n){return!this.$2&&!this.$3||s(0,4921),this.$2=t,this.$3=n,this},t.getID=function(){return this.$2},t.getArtillery2ID=function(){return this.$3},t.addProperty=function(t,n){return this.$4[t]=n,this},t.addTagset=function(t,n){return this.$5[t]=n,this},t.addActivePolicies=function(t){return this.addTagset("active_policies",t),this.addTagset("policy",t),this},t.getProperty=function(t){return this.$4[t]},t.getTagset=function(t){return this.$5[t]},t.getActivePolicies=function(){return this.getTagset("active_policies")},t.post=function(){!this.$1||s(0,37290,this.$2),this.$1=!0;var e=this.$10;e&&e({id:this.$2,artillery2Id:this.$3,properties:this.$4,tagsets:this.$5,sequences:this.$6.map(function(e){return e.setPosted().getPostData()}),segments:this.$7.map(function(e){return e.setPosted().getPostData()}),marks:babelHelpers.extends({},this.$8),connections:this.$9.slice()})},t.setOnPost=function(t){return!this.$10||s(0,4923),this.$10=t,this},t.isPosted=function(){return this.$1},e})();l.default=e}),98);
__d("ServiceWorkerRegistration",["ClientServiceWorkerMessage","EventListener","Promise","Run","promiseDone"],(function(t,n,r,o,a,i){var e,l=!!navigator.serviceWorker,s={};function u(){var e=navigator.serviceWorker;if(!l||!e)throw new Error("serviceWorker is not supported in this browser");return e}var c={isSupported:function(){return l},registerWorkerIfUnregisteredAfterDD:function(t){n("Run").onAfterLoad(function(){n("promiseDone")(c.registerWorkerIfUnregistered(t))})},registerWorkerIfUnregistered:function(r){if(s[r])return s[r];var t=u(),o=s[r]=new(e||(e=n("Promise")))(function(o,a){n("promiseDone")(c.getWorkerRegistration(r),function(i){if(i)o(i);else{var l=n("EventListener").listen(window,"message",function(e){var t;(e==null||(t=e.data)==null?void 0:t.command)==="ServiceWorkerInstallError"&&a()});n("promiseDone")((e||(e=n("Promise"))).resolve(t.register(r,{updateViaCache:"all"})),function(){l.remove(),n("promiseDone")((e||(e=n("Promise"))).resolve(t.ready),o)})}})});return o},unregisterControllingWorker:function(){return new(e||(e=n("Promise")))(function(e,t){var r=new(n("ClientServiceWorkerMessage"))("unregister",{},function(){e(!0)});r.sendViaController()})},getWorkerRegistration:function(t){var e=u();return e.getRegistration(t)},isAWorkerActivated:function(){return!navigator.serviceWorker||!navigator.serviceWorker.getRegistration?(e||(e=n("Promise"))).resolve(!1):navigator.serviceWorker.getRegistration().then(function(e){return!!(e&&e.active)})}},d=c;i.default=d}),66);
__d("Artillery",["invariant","ArtilleryTrace","Banzai","ClientServiceWorkerMessage","Run","ServiceWorkerRegistration","forEachObject","mixInEventEmitter","performance"],(function(t,n,r,o,a,i,l,s){var e,u=!1,c=!1,d=[],m,p,_,f={},g={},h=!1,y=!1;function C(){u||(u=!0,r("Banzai").subscribe(r("Banzai").SHUTDOWN,function(){v._postAll()}))}function b(){p=null,m=null,g={},f={},_=null,y=!1}var v={isEnabled:function(){return c},createTrace:function(){C();var e=new(r("ArtilleryTrace"));return e.setOnPost(function(e){v.emitAndHold("posttrace",e)}),d.push(e),e},getPageTrace:function(){if(m||s(0,4261),_)return _;var e=v.createTrace().setID(m,p);return r("forEachObject")(f,function(t,n,r){e.addProperty(n,t)}),r("forEachObject")(g,function(t,n,r){e.addTagset(n,t)}),_=e,e},setPageProperties:function(t){f=t},addPageTagset:function(t,n){_==null?g[t]=n:_.addTagset(t,n)},setActivePolicies:function(t){v.addPageTagset("active_policies",t),v.addPageTagset("policy",t)},getPageActivePolicies:function(){return v.getPageTagset("active_policies")},enableLogServiceWorker:function(){r("ServiceWorkerRegistration").isSupported()&&(h=!0)},getPageProperty:function(t){return _==null?f[t]:_.getProperty(t)},getPageTagset:function(t){return _==null?g[t]:_.getTagset(t)},enable:function(){c=!0,y||(o("Run").onLeave(b),y=!0)},disable:function(){c=!1},setPageTraceID:function(n,o){if(!(m===n&&p===o)&&(!m&&!p||s(0,4262),m=n,p=o,h&&(e||(e=r("performance")))&&(e||(e=r("performance"))).timing&&(e||(e=r("performance"))).timing.navigationStart)){var t=new(r("ClientServiceWorkerMessage"))("asw-sendStartupData",{traceID:p,windowStart:(e||(e=r("performance"))).timing.navigationStart},null);t.sendViaController()}},_postAll:function(){d.forEach(function(e){return!e.isPosted()&&e.post()})}};r("mixInEventEmitter")(v,{posttrace:!0});var S=v;l.default=S}),98);
__d("AsyncTypedRequest",["AsyncRequest"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.setReplaceTransportMarkers(),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.promisePayload=function(n){return e.prototype.promisePayload.call(this,n)},n.setPayloadHandler=function(n){return e.prototype.setPayloadHandler.call(this,n),this},t})(r("AsyncRequest"));l.default=e}),98);
__d("CometAltpayJsSdkIframeAllowedDomains.experimental",["cr:27561"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:27561")}),98);
__d("isCometAltpayJsSdkIframeAllowedDomain",["CometAltpayJsSdkIframeAllowedDomains.experimental","URI"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze(r("CometAltpayJsSdkIframeAllowedDomains.experimental")),u=Object.freeze(s.allowed_domains);function c(){var t=new(e||(e=r("URI")))(window.location.href);if(u==null||u.length<=0)return!1;var n=u.some(function(n){var o=new(e||(e=r("URI")))(n);return o==null?!1:t.isSameOrigin(o)});return!!n}l.default=c}),98);
__d("BlueCompatBroker",["Env","URI","isCometAltpayJsSdkIframeAllowedDomain","isFacebookURI","isMessengerDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI"],(function(t,n,r,o,a,i){"use strict";var e,l,s,u=new Map,c=!1,d=function(r){var t=new(e||(e=n("URI")))(r);return n("isFacebookURI")(t)||n("isWorkplaceDotComURI")(t)||n("isMessengerDotComURI")(t)||n("isWorkDotMetaDotComURI")(t)},m={dispatch:function(t){var e=m.getMessageEventString(t,"compatAction");if(e!=null){var n=u.get(e);n&&n(t)}},getMessageEventString:function(t,n){var e=t.data;if(typeof e=="object"){var r=e==null?void 0:e[n];if(typeof r=="string")return r}return""},init:function(t){if(t===void 0&&(t=""),!c){document.body&&(document.body.style.overflow="auto");var e=n("isCometAltpayJsSdkIframeAllowedDomain")()?"https://secure.facebook.com/":document.referrer,r=e.indexOf("/",8),o=e.substring(0,r);if(d(o)){var a=new MessageChannel,i=t!==""?t:(l||(l=n("Env"))).iframeKey;s=a.port1,s.onmessage=m.dispatch,window.parent.postMessage({compatAction:"CompatSetup",iframeKey:i},o+"/",[a.port2])}try{window.__REACT_DEVTOOLS_GLOBAL_HOOK__=window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__}catch(e){}c=!0}},register:function(t,n){u.set(t,n)},clear:function(t){u.delete(t)},sendMessage:function(t){c||m.init(),s&&s.postMessage(babelHelpers.extends({},t))}};a.exports=m}),null);
__d("CacheStorage",["ErrorGuard","ExecutionEnvironment","WebStorage","cr:6943","cr:8958","emptyFunction","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="_@_",m="3b",p="CacheStorageVersion",_={length:0,getItem:c=r("emptyFunction"),setItem:c,clear:c,removeItem:c,key:c},f=(function(){function e(e){this._store=e}var t=e.prototype;return t.getStore=function(){return this._store},t.keys=function(){for(var e=[],t=0;t<this._store.length;t++){var n=this._store.key(t);n!=null&&e.push(n)}return e},t.get=function(t){return this._store.getItem(t)},t.set=function(t,n){this._store.setItem(t,n)},t.remove=function(t){this._store.removeItem(t)},t.clear=function(){this._store.clear()},t.clearWithPrefix=function(t){t=t||"";for(var e=this.keys(),n=0;n<e.length;n++){var r=e[n];r!=null&&r.startsWith(t)&&this.remove(r)}},e})(),g=(function(t){function n(){var n;return t.call(this,(n=(e||(e=r("WebStorage"))).getLocalStorage())!=null?n:_)||this}return babelHelpers.inheritsLoose(n,t),n.available=function(){return!!(e||(e=r("WebStorage"))).getLocalStorage()},n})(f),h=(function(t){function n(){var n;return t.call(this,(n=(e||(e=r("WebStorage"))).getSessionStorage())!=null?n:_)||this}return babelHelpers.inheritsLoose(n,t),n.available=function(){return!!(e||(e=r("WebStorage"))).getSessionStorage()},n})(f),y=(function(){function e(){this._store={}}var t=e.prototype;return t.getStore=function(){return this._store},t.keys=function(){return Object.keys(this._store)},t.get=function(t){return this._store[t]===void 0?null:this._store[t]},t.set=function(t,n){this._store[t]=n},t.remove=function(t){t in this._store&&delete this._store[t]},t.clear=function(){this._store={}},t.clearWithPrefix=function(t){t=t||"";for(var e=this.keys(),n=0;n<e.length;n++){var r=e[n];r.startsWith(t)&&this.remove(r)}},e.available=function(){return!0},e})(),C={memory:y,localstorage:g,sessionstorage:h},b=(function(){function t(e,t){this._changeCallbacks=[],this._key_prefix="_cs_";var o;this._exception=null,t&&(this._key_prefix=t),e==="AUTO"||!e?o="memory":o=e,o&&(!C[o]||!C[o].available()?((s||(s=r("ExecutionEnvironment"))).canUseDOM,this._backend=new y):this._backend=new C[o]);var a=this.useBrowserStorage();a&&n("cr:6943").listen(window,"storage",this._onBrowserValueChanged.bind(this));var i=a?this._backend.getStore().getItem(p):this._backend.getStore()[p];i!==m&&this.clearOwnKeys()}var o=t.prototype;return o.useBrowserStorage=function(){return this._backend.getStore()===(e||(e=r("WebStorage"))).getLocalStorage()||this._backend.getStore()===(e||(e=r("WebStorage"))).getSessionStorage()},o.addValueChangeCallback=function(t){var e=this;return this._changeCallbacks.push(t),{remove:function(){e._changeCallbacks.slice(e._changeCallbacks.indexOf(t),1)}}},o._onBrowserValueChanged=function(t){this._changeCallbacks&&String(t.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(e){e(t.key,t.oldValue,t.newValue)})},o.keys=function(){var e=this,t=[];return(u||(u=r("ErrorGuard"))).guard(function(){if(e._backend)for(var n=e._backend.keys(),r=e._key_prefix.length,o=0;o<n.length;o++)n[o].substr(0,r)==e._key_prefix&&t.push(n[o].substr(r))},{name:"CacheStorage"})(),t},o.set=function(o,a,i){if(this._backend){if(this.useBrowserStorage()&&t._persistentWritesDisabled)return this._exception=r("err")("writes disabled"),!1;var e;typeof a=="string"?e=d+a:i?e=n("cr:8958").stringify(a):(e={__t:Date.now(),__v:a},e=n("cr:8958").stringify(e));for(var l=this._backend,s=this._key_prefix+o,u=!0,c=null;u;)try{c=null,l.set(s,e),u=!1}catch(e){c=e;var m=l.keys().length;this._evictCacheEntries(),u=l.keys().length<m}return c!==null?(this._exception=c,!1):(this._exception=null,!0)}return this._exception=r("err")("no back end"),!1},o.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null},o.getLastSetException=function(){return this._exception},o.getStorageKeyCount=function(){var e=this._backend;return e?e.keys().length:0},o._evictCacheEntries=function(){var e=[],r=this._backend;r.keys().forEach(function(o){if(o!==p){var a=r.get(o);if(a===void 0){r.remove(o);return}if(!t._hasMagicPrefix(a)){try{a=n("cr:8958").parse(a,i.id)}catch(e){r.remove(o);return}a&&a.__t!==void 0&&a.__v!==void 0&&e.push([o,a.__t])}}}),e.sort(function(e,t){return e[1]-t[1]});for(var o=0;o<Math.ceil(e.length/2);o++)r.remove(e[o][0])},o.get=function(o,a){var e;if(this._backend)if((u||(u=r("ErrorGuard"))).applyWithGuard(function(){e=this._backend.get(this._key_prefix+o)},this,[],{onError:function(){e=null},name:"CacheStorage:get"}),e!=null)if(t._hasMagicPrefix(e))e=e.substr(d.length);else try{e=n("cr:8958").parse(e,i.id),e&&e.__t!==void 0&&e.__v!==void 0&&(e=e.__v)}catch(t){e=void 0}else e=void 0;return e===void 0&&a!==void 0&&(e=a,this.set(o,e)),e},o.remove=function(t){this._backend&&(u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+t],{name:"CacheStorage:remove"})},o._setVersion=function(){var e=this;(u||(u=r("ErrorGuard"))).applyWithGuard(function(){e.useBrowserStorage()?e._backend.getStore().setItem(p,m):e._backend.getStore()[p]=m},this,[],{name:"CacheStorage:setVersion"})},o.clear=function(){this._backend&&((u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())},o.clearOwnKeys=function(){this._backend&&((u||(u=r("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())},t.getAllStorageTypes=function(){return Object.keys(C)},t._hasMagicPrefix=function(t){return t.substr(0,d.length)===d},t.disablePersistentWrites=function(){t._persistentWritesDisabled=!0},t})();b._persistentWritesDisabled=!1,i.exports=b}),34);
__d("Chromedome",["fbt"],(function(t,n,r,o,a,i,l,s){function e(){if(document.domain==null)return null;var e=document.domain,t=/^intern\./.test(e);if(t)return null;var n=/(^|\.)facebook\.(com|sg)$/.test(e);if(n)return"facebook";var r=/(^|\.)instagram\.com$/.test(e);if(r)return"instagram";var o=/(^|\.)threads\.(com|net)$/.test(e);if(o)return"threads";var a=/(^|\.)messenger\.com$/.test(e);return a?"messenger":null}function u(e){return e==="instagram"?s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable an Instagram feature or \"hack\" someone's account, it is a scam and will give them access to your Instagram account."):e==="threads"?s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Threads feature or \"hack\" someone's account, it is a scam and will give them access to your Threads account."):s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Facebook feature or \"hack\" someone's account, it is a scam and will give them access to your Facebook account.")}function c(t){if(top===window){var n=e();if(n!=null){var r=s._(/*BTDS*/"Stop!"),o=u(n),a=s._(/*BTDS*/"See {url} for more information.",[s._param("url","https://www.facebook.com/selfxss")]),i="font-family:helvetica; font-size:20px; ";[[r,i+"font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;"],[o,i],[a,i],["",""]].map(function(e){window.setTimeout(console.log.bind(console,"\n%c"+e[0].toString(),e[1]))})}}}l.start=c}),226);
__d("ClickRefUtils",["DataAttributeUtils"],(function(t,n,r,o,a,i){var e={get_intern_ref:function(t){if(t){for(var e={profile_minifeed:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,searchBarClickRef:1},n=t;n&&n!=document.body;n=n.parentNode)if(!(!n.id||typeof n.id!="string")){if(n.id.substr(0,8)=="pagelet_")return n.id.substr(8);if(n.id.substr(0,8)=="box_app_"||e[n.id])return n.id}}return"-"},get_href:function(t){var e=t.getAttribute&&(t.getAttribute("ajaxify")||t.getAttribute("data-endpoint"))||t.action||t.href||t.name;return typeof e=="string"?e:null},should_report:function(r,o){return o=="FORCE"?!0:o=="INDIRECT"?!1:r&&(e.get_href(r)||r.getAttribute&&n("DataAttributeUtils").getDataFt(r))}};a.exports=e}),null);
__d("ClickRefLogger",["Arbiter","Banzai","ClickRefUtils","ScriptPath","SessionName","Vector","collectDataAttributes","ge","pageID"],(function(t,n,r,o,a,i){var e={delay:0,retry:!0};function l(e){if(!n("ge")("content"))return[0,0,0,0];var t=n("Vector").getEventPosition(e);return[t.x,t.y,0,0]}function s(e,r,o,a){var i="r",s=[0,0,0,0],u,c;if(o){u=o.type,u=="click"&&n("ge")("content")&&(s=l(o));var d=0;o.ctrlKey&&(d+=1),o.shiftKey&&(d+=2),o.altKey&&(d+=4),o.metaKey&&(d+=8),d&&(u+=d)}r&&(c=n("ClickRefUtils").get_href(r));var m=n("collectDataAttributes")(o?o.target||o.srcElement:r,["ft","gt"]);return Object.assign(m.ft,a.ft),Object.assign(m.gt,a.gt),typeof m.ft.ei=="string"&&delete m.ft.ei,o&&o.which&&(m.ft.click_type=o.which===1?"left":o.which===2?"middle":"right"),[e.ue_ts,e.ue_count,c||"-",e.context,u||"-",n("ClickRefUtils").get_intern_ref(r),i,t.URI?t.URI.getRequestURI(!0,!0).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,m].concat(s).concat(n("pageID")).concat(n("ScriptPath").getTopViewEndpoint())}n("Arbiter").subscribe("ClickRefAction/new",function(t,r){if(n("ClickRefUtils").should_report(r.node,r.mode)){var o=s(r.cfa,r.node,r.event,r.extra_data),a=[n("SessionName").getName(),Date.now(),"act"];n("Banzai").post("click_ref_logger",Array.prototype.concat(a,o),e)}}),n("Arbiter").subscribe("ClickRefAction/contextmenu",function(t,r){if(n("ClickRefUtils").should_report(r.node,r.mode)){var o=s(r.cfa,r.node,r.event,r.extra_data),a=[n("SessionName").getName(),Date.now(),"act"];n("Banzai").post("click_ref_logger",Array.prototype.concat(a,o),e)}})}),null);
__d("CometAltpayJsSdkIframeAllowedDomainsJSModuleWrapper",["CometAltpayJsSdkIframeAllowedDomains"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("CometAltpayJsSdkIframeAllowedDomains")}),98);
__d("DimensionTracking",["Cookie","Event","debounce","getViewportDimensions","isInIframe"],(function(t,n,r,o,a,i,l){function e(){var e=r("getViewportDimensions")();r("Cookie").set("wd",e.width+"x"+e.height)}r("isInIframe")()||(setTimeout(e,100),r("Event").listen(window,"resize",r("debounce")(e,250)),r("Event").listen(window,"focus",e))}),34);
__d("EventListenerImplForCacheStorage",["CometEventListener"],(function(t,n,r,o,a,i){"use strict";i.default=n("CometEventListener")}),66);
__d("FalcoAppUniverse",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2,OCULUS:3}),l=e;i.default=l}),66);
__d("Queue",[],(function(t,n,r,o,a,i){var e={},l=(function(){function t(e){this._timeout=null,this._interval=(e==null?void 0:e.interval)||0,this._processor=e==null?void 0:e.processor,this._queue=[],this._stopped=!0}var n=t.prototype;return n._dispatch=function(t){var e=this;if(t===void 0&&(t=!1),!(this._stopped||this._queue.length===0)){var n=this._processor;if(n==null)throw this._stopped=!0,new Error("No processor available");var r=this._interval;if(r!=null)n.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return e._dispatch()},r);else for(;this._queue.length;)n.call(this,this._queue.shift())}},n.enqueue=function(t){return this._processor&&!this._stopped?this._processor(t):this._queue.push(t),this},n.start=function(t){return t&&(this._processor=t),this._stopped=!1,this._dispatch(),this},n.isStarted=function(){return!this._stopped},n.dispatch=function(){this._dispatch(!0)},n.stop=function(t){return this._stopped=!0,t&&this._timeout!=null&&clearTimeout(this._timeout),this},n.merge=function(t,n){if(n){var e;(e=this._queue).unshift.apply(e,t._queue)}else{var r;(r=this._queue).push.apply(r,t._queue)}return t._queue=[],this._dispatch(),this},n.getLength=function(){return this._queue.length},t.get=function(r,o){var n;return r in e?n=e[r]:n=e[r]=new t(o),n},t.exists=function(n){return n in e},t.remove=function(n){return delete e[n]},t})();i.default=l}),66);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=r("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),g=5*1024,h=(e=(m||(m=r("AnalyticsCoreData"))).max_delay_br_queue)!=null?e:60*1e3,y=(s=(m||(m=r("AnalyticsCoreData"))).max_delay_br_queue_immediate)!=null?s:1e3,C=(u=(m||(m=r("AnalyticsCoreData"))).max_delay_br_init_not_complete)!=null?u:1e3,b="falco:",v=new(r("Queue")),S=5e3,R=6e4,L=r("uuidv4")(),E="ods_web_batch",k=new Map,I=new Set,T=new Set,D=o("FalcoUtils").getTaggedBitmap(38),x=(c=r("FalcoAppUniverse").cast((m||(m=r("AnalyticsCoreData"))).app_universe))!=null?c:1,$=[],P=0,N=null,M=!1,w=!1,A=!1,F=!0,O=!1,B=!1,W=Date.now()-R,q=1,U=C>h?C:h,V=C;de();for(var H of(G=(m||(m=r("AnalyticsCoreData"))).stateful_events_list_for_br)!=null?G:[]){var G;I.add(H)}for(var z of(j=(m||(m=r("AnalyticsCoreData"))).stateless_non_fb_events_for_br)!=null?j:[]){var j;T.add(z)}function K(){return(m||(m=r("AnalyticsCoreData"))).enable_bladerunner&&!(_||(_=r("ExecutionEnvironment"))).isInWorker}function Q(e,t){o("FalcoUtils").bumpODSMetrics(t.item.name,"event.info.streaming.batched",1);var n=t.item.extra.length;P+n>g&&(clearTimeout(N),X()),$.push([e,t]),P+=n}function X(){N=null,M=!1;var e=$;re("event.info.streaming.batch_processing",e.map(function(e){return e[1].item})),B?v.enqueue(function(t){return t.log(e.map(function(e){return e[1].item}),function(t){if(!t){Y(e,"event.info.banzai_fallback");return}J(e,t,"event.info.streaming.enqueued")})}):Y(e,"event.non_critical_failure.streaming_init_not_complete"),$=[],P=0}function Y(e,t){var n=function(){var e,n=a[0],i=a[1],l=i.item;if(o("FalcoUtils").bumpODSMetrics(l.name,t,1),l.identity||(l.identity=(m||(m=r("AnalyticsCoreData"))).identity),(e=l.logCritical)!=null&&e)ae.logCritical([l],function(e){return n.markItem(i,e)});else{var s;(s=l.logImmediate)!=null&&s?ae.logImmediately([l],function(e){return n.markItem(i,e)}):ae.log([l],function(e){return n.markItem(i,e)})}};for(var a of e)n()}function J(e,t,n){for(var r of e){var a=r[0],i=r[1];o("FalcoUtils").bumpODSMetrics(i.item.name,n,1),a.markItem(i,t)}}function Z(e){return{events:e.map(function(e){return{name:e.name,extra:e.extra,rate:e.policy.r,time:e.time/1e3,tag:0,tags:e.tags,shouldAddState:e.shouldAddState,identity:te(e.identity),expTags:e.exptTags,sessionID:e.sessionId,deviceID:e.deviceId}})}}function ee(e){var t,n,o,a={deviceId:(m||(m=r("AnalyticsCoreData"))).device_id,familyDeviceId:null,osBuildNumber:null,sessionId:e,appId:m.app_id,appVersion:(t=(m||(m=r("AnalyticsCoreData"))).app_version)!=null?t:null,bundleId:null,consentState:null,identity:null,pushPhase:m.push_phase};return((n=(o=(m||(m=r("AnalyticsCoreData"))).stateful_events_list_for_br)==null?void 0:o.length)!=null?n:0)>0&&(a.ambientState=(m||(m=r("AnalyticsCoreData"))).state_for_br),a.identity=te(m.identity),Object.freeze(a)}function te(e){var t=e==null?void 0:e.claim,n=t!=null?[t]:[];if(x===2||x===3){var r=e==null?void 0:e.appScopedIdentity;if(r!==void 0)return{appScopedIdentity:{uid:r,identifier:r,claims:n}}}else{var o=e==null?void 0:e.fbIdentity;if(o!==void 0)return{facebookIdentity:{actorId:o.actorId,accountId:o.accountId,claims:n}}}return null}function ne(e,t){for(var n of e){var a,i,l,s=(l={},l.e=n.extra,l.r=n.policy.r,l.d=(a=n.deviceId)!=null?a:(m||(m=r("AnalyticsCoreData"))).device_id,l.s=(i=n.sessionId)!=null?i:o("WebSession").getId(),l.t=n.time,l.a=n.appVersion,l);n.privacyContext&&(s.p=n.privacyContext),n.tags!=null&&(s.b=n.tags);var u=n.identity;u&&(s.id=u),r("Banzai").post(b+n.name,s,t)}re("event.uploaded",e)}function re(e,t){for(var n of t)n.name!==E&&o("FalcoUtils").bumpODSMetrics(n.name,e,1)}function oe(e,t){var n="falco.fabric.www."+(m||(m=r("AnalyticsCoreData"))).push_phase;(d||(d=o("ODS"))).bumpEntityKey(1344,n,e,t)}var ae={log:function(t,n){re("event.info.banzai.log.upload_processing",t),ne(t,r("Banzai").BASIC),n(!0)},logImmediately:function(t,n){re("event.info.banzai.log_immediately.upload_processing",t),ne(t,r("Banzai").VITAL),n(!0)},logCritical:function(t,n){re("event.info.banzai.log_critical.upload_processing",t),ne(t,{signal:!0,retry:!0}),n(!0)}};function ie(e){de();var t=le(e,"banzai_data_loss","log"),n=le(e,"banzai_data_loss","logImmediately"),o=le(e,"banzai_data_loss","logCritical"),a=le(e,"bladerunner_data_loss",""),i=le(e,"bladerunner_data_loss","logCritical");if(oe("js.br_data_loss.posted."+e,1),B&&F)try{v.enqueue(function(t){return t.log([a],function(t){if(!t){oe("js.br.transport_failure."+e,1),ae.logCritical([i],function(t){oe("js.br.failure_fallback_success_callback."+e,1)});return}oe("js.br.success_callback."+e,1)})})}catch(t){oe("js.br.error_enqueueing."+e,1),ae.logCritical([i],function(t){oe("js.br.enqueuing_fallback_success_callback."+e,1)})}else F||oe("js.br.failed."+e,1),B||oe("js.br.init_not_complete."+e,1),ae.logCritical([i],function(t){oe("js.br.init_fallback_success_callback."+e,1)});ne([t],r("Banzai").BASIC),ne([n],r("Banzai").VITAL),ne([o],{signal:!0,retry:!0})}function le(e,t,n){return{name:t,time:(p||(p=r("performanceAbsoluteNow")))(),policy:{r:1},extra:JSON.stringify({event_index:e,falco_js_connection_id:L,logging_mode:n,logging_flow_flag:"original_flow"}),appVersion:(m||(m=r("AnalyticsCoreData"))).app_version}}function se(){W+S<Date.now()&&(ie(q),W=Date.now(),q++)}function ue(){window.setTimeout(function(){se(),q<=40&&ue()},R)}function ce(e){v.start(function(t){return t({log:function(n,o){re("event.info.streaming.queue_processing",n);var t=JSON.stringify(Z(n));e?(m||(m=r("AnalyticsCoreData"))).enable_ack?r("promiseDone")(e.amendWithAck(t),function(e){e?(re("event.streamed.with_ack",n),re("event.uploaded",n)):re("event.non_critical_failure.streaming.ack_failed",n),o(e)},function(){re("event.non_critical_failure.streaming.ack_rejected",n),o(!1)}):(e.amendWithoutAck(t),re("event.streamed.without_ack",n),re("event.uploaded",n)):(re("event.non_critical_error.streaming.stream_not_available",n),o(!1))},logImmediately:function(t,n){this.log(t,n)},logCritical:function(t,n){this.log(t,n)}})})}function de(){w||(B=!1,K()&&(f.onReady(function(e){if(!e){F=!1,O=!0,v.start(function(e){return e(ae)});return}var t=e,n,a={onTermination:function(t){t.message==="Stream closed"?(v.stop(!0),w=!1):(o("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.rejected",1),F=!1,v.start(function(e){return e(ae)}))},onFlowStatus:function(){}};r("promiseDone")(t.requestStream({method:"Falco"},JSON.stringify(ee(o("WebSession").getId())),a,{requestId:""}).then(function(e){n=e,ce(n),B=!0,U=h,V=y}).catch(function(e){o("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.failed",1),v.stop(!0),w=!1}))}),w=!0))}function me(e){var t,n=e.name;if(!K()||!F)return!1;if(I.has(n)||e.policy.s!==1&&((t=(m||(m=r("AnalyticsCoreData"))).br_stateful_migration_on)!=null&&t)){var a;return e.shouldAddState=!0,e.tags=o("FalcoUtils").xorBitmap((a=e.tags)!=null?a:[0,0],D),!0}if(x!==1&&(m||(m=r("AnalyticsCoreData"))).enable_non_fb_br_stateless_by_default!==!0&&!T.has(n))return!1;if(e.policy.s===1){var i;return e.tags=o("FalcoUtils").xorBitmap((i=e.tags)!=null?i:[0,0],D),!0}return!1}function pe(e){if(e==="")return null;if(k.has(e))return k.get(e);var t={claim:""},n=e.split("^#");if(n.length>=4){var r=n[0],o=n[1],a=n[2],i=n[3];a!==""?t={appScopedIdentity:a,claim:i}:r!==""&&(t={fbIdentity:{accountId:r,actorId:o},claim:i}),k.set(e,t)}return t}function _e(){if(A)return;A=!0,r("PersistedQueue").setHandler("falco_queue_log",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){me(n.item)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log",1),de(),N==null&&(N=setTimeout(X,U)),i&&!e(a)&&(n.item.identity=i),Q(t,n)):(i?n.item.identity=i:n.item.identity=(m||(m=r("AnalyticsCoreData"))).identity,ae.log([n.item],function(e){return t.markItem(n,e)}))})(n)}),r("PersistedQueue").setHandler("falco_queue_immediately",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){me(n.item)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log_immediately",1),de(),(N==null||!M)&&(clearTimeout(N),N=setTimeout(X,V),M=!0),n.item.logImmediate=!0,i&&!e(a)&&(n.item.identity=i),Q(t,n),r("PersistedQueue").isPersistenceAllowed()||(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.streaming_no_persistence.log_immediately",1),X())):(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.banzai.log_immediately",1),i?n.item.identity=i:n.item.identity=(m||(m=r("AnalyticsCoreData"))).identity,ae.logImmediately([n.item],function(e){return t.markItem(n,e)}))})(n)}),r("PersistedQueue").setHandler("falco_queue_critical",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){var l=n.item;me(l)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log_critical",1),de(),l.logCritical=!0,B?(i&&!e(a)&&(l.identity=i),v.enqueue(function(e){return e.logCritical([l],function(e){if(!e){l.identity||(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity),Y([[t,n]],"event.info.banzai_fallback.log_critical");return}J([[t,n]],e,"event.uploaded")})})):(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity,Y([[t,n]],"event.non_critical_failure.streaming_init_not_complete.log_critical"))):(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity,o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.banzai.log_critical",1),ae.logCritical([l],function(e){return t.markItem(n,e)}))})(n)}),(m||(m=r("AnalyticsCoreData"))).enable_dataloss_timer&&(de(),se(),ue());function e(e){try{var t=o("FalcoUtils").identityToString((m||(m=r("AnalyticsCoreData"))).identity);return e===t}catch(e){return(d||(d=o("ODS"))).bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1),!0}}}l.attach=_e}),98);
__d("NavigationClickPointHandler",["Event","ScriptPath","collectDataAttributes"],(function(t,n,r,o,a,i,l){function e(e){var t=null,n=r("collectDataAttributes")(e,["ft"],["href","data-click"]),o=n.normal.href;if(!o||o==="#")return!1;var a=n.normal["data-click"];t===null&&a&&(t={click:a});var i=n.ft.tn;if(t===null&&i&&(t={tn:i}),t===null&&e.getAttribute){var l=e.getAttribute("class");l!=null&&(t={class:l})}return t}function s(t){var n=t.target||t.srcElement,r=e(n);typeof r!="boolean"&&o("ScriptPath").setClickPointInfo(r)}document.documentElement!==null&&r("Event").listen(document.documentElement,{click:s}),l.getClickPointInfo=e}),98);
__d("WebBlueTimeSpentNavigationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1829319"),s=o("FalcoLoggerInternal").create("web_blue_time_spent_navigation",e),u=s;l.default=u}),98);
__d("ScriptPathLogger",["Banzai","LogHistory","ScriptPath","URI","WebBlueTimeSpentNavigationFalcoEvent","WebSession","isInIframe","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="script_path_change",c={scriptPath:null,categoryToken:null,extraData:{}},d=!1,m="imp_id";function p(t){var n=(e||(e=r("URI"))).getNextURI?(e||(e=r("URI"))).getNextURI():new(e||(e=r("URI")))(window.location.href),o=n.getQueryData(),a=n.getPath();a.endsWith("/")&&(a=a.substr(0,a.length-1)),o.comment_id&&(t.extra_data=babelHelpers.extends({},t.extra_data,{graphql_comment_id:o.comment_id}));var i=_(a,o);if(i){t.content_id=i;return}var l=f(a);if(l!==""){t.dest_topic_feed=l;return}if(g(a)){var s=o.queue_id;s&&(t.dest_srt_queue_id=s);var u=o.job_in_review;u&&(t.dest_srt_reviewing_job_id=u);return}}function _(e,t){if(t.story_fbid)return t.story_fbid;if(t.fbid)return t.fbid;if(t.view==="permalink"&&t.id)return t.id;var n=/\/(posts|videos|notes|groups\/.*\/permalink)\//,r=/^[0-9]+$/;if(n.test(e)){var o=e.split("/"),a=o[o.length-1];if(r.test(a))return a}return""}function f(e){if(!e||e.search("/feed/topics/")==-1)return"";var t=e.split("/");return t[t.length-1]}function g(e){return!!e&&e.search("/intern/review/")!==-1}function h(e,t,n,a){if(o("WebSession").extend(),!(!d||r("isInIframe")())){var i={source_path:e.scriptPath,source_token:e.categoryToken,dest_path:t.scriptPath,dest_token:t.categoryToken,impression_id:t.extraData?t.extraData.imp_id:null,cause:n,sid_raw:o("WebSession").getId()},l=n==="unload";if(l||p(i),a!=null){var s=a.snowlift_content_id;!l&&s!=null&&(i.content_id=s,delete a.snowlift_content_id),i.extra_data=babelHelpers.extends({},i.extra_data,a)}e.scriptPath===null&&(i.referrer=document.referrer);var u=o("ScriptPath").getClickPointInfo();if(u&&(i.click_point_info=u),e.extraData)for(var c in e.extraData)c!=m&&(i["source_"+c]=e.extraData[c]);if(t.extraData)for(var _ in t.extraData)_!=m&&(i["dest_"+_]=t.extraData[_]);e.topViewEndpoint&&(i.source_endpoint=e.topViewEndpoint),t.topViewEndpoint&&(i.dest_endpoint=t.topViewEndpoint),e.restored&&(i.source_restored=!0),r("WebBlueTimeSpentNavigationFalcoEvent").logImmediately(function(){return{json_data:JSON.stringify(i)}}),o("ScriptPath").setClickPointInfo(null)}}function y(){h(o("ScriptPath").getSourcePageInfo()||c,o("ScriptPath").getPageInfo()||c,"load",{dest_navigation_type:v()})}function C(e,t,n){h(e,t,"transition",n)}function b(){h(o("ScriptPath").getPageInfo()||c,c,"unload"),o("ScriptPath").shutdown()}function v(){if((s||(s=r("performance"))).navigation==null||(s||(s=r("performance"))).navigation.type==null)return"UNSUPPORTED";switch((s||(s=r("performance"))).navigation.type){case(s||(s=r("performance"))).navigation.TYPE_NAVIGATE:return"NAVIGATE";case(s||(s=r("performance"))).navigation.TYPE_RELOAD:return"RELOAD";case(s||(s=r("performance"))).navigation.TYPE_BACK_FORWARD:return"BACK_FORWARD";case(s||(s=r("performance"))).navigation.TYPE_RESERVED:return"RESERVED";default:return"UNKNOWN"}}var S=o("ScriptPath").subscribe(function(e){if(d){var t=e.source,n=e.dest,r=e.cause,o=e.extraData;r?h(t||c,n||c,r,o):t?C(t,n||c,o):y()}});r("Banzai").subscribe(r("Banzai").SHUTDOWN,b);function R(){d=!0,o("ScriptPath").getPageInfo()&&y()}function L(){d=!1,S.remove()}l.BANZAI_LOGGING_ROUTE=u,l.startLogging=R,l.stopLogging=L}),98);
__d("ServiceWorkerURLCleaner",[],(function(t,n,r,o,a,i){var e=/sw_fnr_id=\d+&?/,l=/fnr_t=\d+&?/,s=!1,u=!1;function c(){if(s)return u;if(s=!0,location.search&&e.test(location.search)&&(u=!0,history!==void 0&&typeof history.replaceState=="function")){var t=location.toString().replace(e,"").replace(l,"").replace(/\?$/,"");history.replaceState({},document.title,t)}return u}i.removeRedirectID=c}),66);
__d("StringTransformations",[],(function(t,n,r,o,a,i){"use strict";var e={unicodeEscape:function(t){return t.replace(/[^A-Za-z0-9\-\.\:\_\$\/\+\=]/g,function(e){var t=e.charCodeAt(0).toString(16);return"\\u"+("0000"+t.toUpperCase()).slice(-4)})},unicodeUnescape:function(t){return t.replace(/(\\u[0-9A-Fa-f]{4})/g,function(e){return String.fromCharCode(parseInt(e.slice(2),16))})}};i.default=e}),66);
__d("TimeSpentArray",["Banzai","TimeSlice","clearTimeout","pageID","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e=2,s=e*32,u,c,d,m,p,_,f,g,h,y,C,b={},v,S=null,R=null;function L(){return{timeoutDelayMap:b,nextDelay:v,timeoutInSeconds:p}}function E(){if(u){var e=Date.now();e>f&&(h=Math.min(s,Math.ceil(e/1e3-_)));var t=x();t&&u(t,v)}D()}function k(){I(),m=r("setTimeoutAcrossTransitions")(r("TimeSlice").guard(E,"TimeSpentArray Timeout",{propagationType:r("TimeSlice").PropagationType.ORPHAN}),p*1e3)}function I(){m&&(r("clearTimeout")(m),m=null)}function T(t,n){_=t,f=_*1e3,g=[1];for(var r=1;r<e;r++)g.push(0);h=1,y+=1,C+=1;var o=C.toString()+"_delay";v=b[o],v===void 0&&(v=b.delay);var a=C.toString()+"_timeout",i=b[a];i===void 0&&(i=b.timeout),i=Math.min(i,s),p=i||s,S=d?d():null,R=n,k()}function D(){I(),g=null}function x(){return g?{tos_id:r("pageID"),start_time:_,tos_array:g.slice(0),tos_len:h,tos_seq:C,tos_cum:y,start_endpoint:S,start_event:R}:null}function $(e,t){e>=f&&e-f<1e3||(c&&c(e),P(Math.floor(e/1e3),t))}function P(e,t){var n=e-_;(n<0||n>=s)&&E(),g?(g[n>>5]|=1<<(n&31),h=n+1,y+=1,f=e*1e3):T(e,t)}function N(e,t,n,o,a){y=0,C=-1,u=e,c=o,d=a,typeof t=="object"&&t!==null?b=t:b={},T(Math.floor((n==null||n===0?Date.now():n)/1e3),"init"),r("Banzai").subscribe(r("Banzai").SHUTDOWN,E)}function M(e,t){$(e,t!=null?t:"unknown")}function w(){return x()}function A(){E()}function F(){D()}function O(){return L()}l.init=N,l.update=M,l.get=w,l.ship=A,l.reset=F,l.testState=O}),98);
__d("TimeSpentImmediateActiveSecondsLogger",["cr:844180"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:844180")}),98);
__d("WebTimeSpentBitArrayFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1829320"),s=o("FalcoLoggerInternal").create("web_time_spent_bit_array",e),u=s;l.default=u}),98);
__d("TimeSpentBitArrayLogger",["Arbiter","Env","LogHistory","ODS","TimeSpentArray","TimeSpentConfig","TimeSpentImmediateActiveSecondsLogger","UserActivity","WebSession","WebTimeSpentBitArrayFalcoEvent","cr:1187159","isInIframe"],(function(t,n,r,o,a,i,l){var e,s,u="";function c(e){var t=d();t!==u&&(n("TimeSpentArray").ship(),u=t)}function d(){return n("WebSession").extend(),n("WebSession").getId()}function m(e,t){e.sid_raw=u,n("Arbiter").inform("timespent/tosbitdataposted",babelHelpers.extends({},e)),r("WebTimeSpentBitArrayFalcoEvent").logImmediately(function(){return{sid_raw:e.sid_raw,start_time:e.start_time,tos_array:e.tos_array,tos_cum:e.tos_cum,tos_id:e.tos_id,tos_len:e.tos_len,tos_seq:e.tos_seq}})}i.exports={init:function(r){if(!(n("isInIframe")()&&!(e||(e=n("Env"))).isCQuick)){if((e||(e=n("Env"))).isCQuick){n("cr:1187159")!=null?n("UserActivity").subscribe(function(e,t){n("cr:1187159").sendMessage({compatAction:"update_time_spent_bit_array_from_boc",eventTimeInMs:t.last_inform})}):(s||(s=n("ODS"))).bumpEntityKey(223,"core_metrics.time_spent.www","blue_on_comet_without_compat_broker");return}u=d(),n("UserActivity").subscribe(function(e,t){var r=t.last_inform;n("TimeSpentArray").update(r),n("TimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(r)});var t=Date.now();n("TimeSpentArray").init(m,n("TimeSpentConfig"),t,c),n("TimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(t),(s||(s=n("ODS"))).bumpEntityKey(2966,"ms.time_spent.qa.www","time_spent.bits.js_initialized")}}}}),34);
__d("WebImmediateActiveSecondsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1843988"),s=o("FalcoLoggerInternal").create("web_immediate_active_seconds",e),u=s;l.default=u}),98);
__d("TimeSpentImmediateActiveSecondsLoggerBlue",["ImmediateActiveSecondsConfig","ScriptPath","WebImmediateActiveSecondsFalcoEvent"],(function(t,n,r,o,a,i,l){var e=0;function s(e){if(r("ImmediateActiveSecondsConfig").sampling_rate<=0)return!1;var t=Math.floor(e/1e3)%r("ImmediateActiveSecondsConfig").sampling_rate;return t===r("ImmediateActiveSecondsConfig").ias_bucket}function u(t){t>=e&&t-e<1e3||(s(t)&&r("WebImmediateActiveSecondsFalcoEvent").logImmediately(function(){return{activity_time_ms:t,last_activity_time_ms:e,script_path:r("ScriptPath").getTopViewEndpoint()}}),e=Math.floor(t/1e3)*1e3)}i.exports={maybeReportActiveSecond:u}}),34);
__d("TransportSelectingClientSingletonConditional",["cr:710"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:710")}),98);
__d("WebPerfDeviceInfoLogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1871697"),s=o("FalcoLoggerInternal").create("web_perf_device_info_log",e),u=s;l.default=u}),98);
__d("XDeviceClassRealtimeControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/web_perf/get_perf_level/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("WebDevicePerfInfoLogging",["AsyncTypedRequest","JSScheduler","Promise","WebDevicePerfInfoData","WebPerfDeviceInfoLogFalcoEvent","XDeviceClassRealtimeControllerRouteBuilder","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){var t=document.createElement("canvas"),n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){var r=n.getExtension("WEBGL_debug_renderer_info");if(r){var o=n.getParameter(r.UNMASKED_RENDERER_WEBGL),a=n.getParameter(r.UNMASKED_VENDOR_WEBGL);e.gpu_vendor=a,e.gpu_renderer=o}}}function c(){var e=window.navigator,t={};return e&&e.hardwareConcurrency!==void 0&&(t.cpu_cores=e.hardwareConcurrency),e&&e.deviceMemory!==void 0&&(t.ram=e.deviceMemory),r("WebDevicePerfInfoData").needsFullUpdate&&u(t),t}function d(){var e=c();r("WebPerfDeviceInfoLogFalcoEvent").log(function(){var t,n,r,o;return{cpu_cores:(t=e.cpu_cores)!=null?t:null,ram:(n=e.ram)!=null?n:null,gpu_renderer:(r=e.gpu_renderer)!=null?r:null,gpu_vendor:(o=e.gpu_vendor)!=null?o:null}})}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=c(),t=yield new(r("AsyncTypedRequest"))(r("XDeviceClassRealtimeControllerRouteBuilder").buildURL({})).setData(e).promisePayload();return t.devicePerfClassLevel}),p.apply(this,arguments)}function _(){(r("WebDevicePerfInfoData").needsFullUpdate||r("WebDevicePerfInfoData").needsPartialUpdate)&&(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(d)}function f(){return new(e||(e=n("Promise")))(function(e,t){r("WebDevicePerfInfoData").needsFullUpdate||r("WebDevicePerfInfoData").needsPartialUpdate?(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(function(){m().then(e).catch(t)}):e()})}l.doLog=_,l.doLogPromise=f}),98);
__d("WebStorageMonster",["AsyncRequest","CacheStorage","Event","ExecutionEnvironment","NetworkStatus","StringTransformations","UserActivity","WebStorage","WebStorageCleanupReason","WebStorageMonsterLoggingURI","ifRequired","isEmpty","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=1e4,d=5,m=!1;function p(e){var t={};for(var n in e){var o=e.getItem(n),a=r("StringTransformations").unicodeEscape(n);typeof o=="string"&&(t[a]=o.length)}return t}function _(t){var n=(e||(e=r("WebStorage"))).getLocalStorage();!n||t==null||!t.keys||h._getLocalStorageKeys().forEach(function(e){t.keys.includes(e)&&(n.removeItem(e),""+e)})}function f(t){var n=(e||(e=r("WebStorage"))).getLocalStorage();n&&h._getLocalStorageKeys().forEach(function(e){t.some(function(t){return new RegExp(t).test(e)})||(n.removeItem(e),""+e)})}function g(e,t){if(e===void 0&&(e=!1),t===void 0&&(t=c),r("UserActivity").isActive(t)){var n=Math.max(c,Math.floor(t/d));r("setTimeoutAcrossTransitions")(function(){g(e,n)},n)}else{h.cleanNow(e);var o=t*d;r("setTimeoutAcrossTransitions")(function(){g(e,o)},o)}}var h={_getLocalStorageKeys:function(){var t=(e||(e=r("WebStorage"))).getLocalStorage();return t?Object.keys(t):[]},cleanNow:function(n){n===void 0&&(n=!1);var t=Date.now(),o={},a=(e||(e=r("WebStorage"))).getLocalStorage();a&&(o.local_storage=p(a));var i=e.getSessionStorage();i&&(o.session_storage=p(i));var l=!(s||(s=r("isEmpty")))(o),u=Date.now();if(o.logtime=u-t,l){var c,d=r("WebStorageMonsterLoggingURI").uri;if(d===null)return null;var m=function(){new(r("AsyncRequest"))(d).setData(o).setHandler(function(e){var t=e.getPayload();t&&t.keys&&(t.keys=t.keys.map(r("StringTransformations").unicodeUnescape)),n||_(t),r("NetworkStatus").reportSuccess()}).setErrorHandler(function(){r("NetworkStatus").reportError()}).setOption("retries",2).send()};if(r("NetworkStatus").isOnline())m();else{var f=function(t){var e=t.online;e&&(m(),c.remove())};c=r("NetworkStatus").onChange(f)}}},cleanOnLogout:function(n,a){o("WebStorageCleanupReason").setLastCleanupReason(a),r("CacheStorage").disablePersistentWrites(),r("ifRequired")("WebAsyncStorage",function(e){e.disablePersistentWrites()}),f(n||[]);var t=(e||(e=r("WebStorage"))).getSessionStorage();t&&t.clear(),r("ifRequired")("WebAsyncStorage",function(e){e.clear(function(){})})},registerLogoutForm:function(t,n){r("Event").listen(t,"submit",function(e){h.cleanOnLogout(n,"WebStorageMonster.registerLogoutForm")})},schedule:function(t){t===void 0&&(t=!1),!(m||!(u||(u=r("ExecutionEnvironment"))).isInBrowser)&&(m=!0,g(t))}},y=h;l.default=y}),98);